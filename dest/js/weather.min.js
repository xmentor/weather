!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("WeatherApp",[],t):"object"==typeof exports?exports.WeatherApp=t():e.WeatherApp=t()}(this,function(){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(1),u=a(o),s=n(2),l=a(s),d=n(3),c=a(d),f=function(){function e(){r(this,e),this.storage=new u.default("weather2"),this.initEvents(),this.init(),this.activedElement=null}return i(e,[{key:"init",value:function(){var e=this.storage.load();if(e.length<1)return!1;e.forEach(function(e){new c.default(e)})}},{key:"initEvents",value:function(){this.modalEvents(),this.addWeatherEvent(),this.refreshButtonEvent(),this.removeWeatherEvent()}},{key:"updateStatus",value:function(e){document.querySelector(".status").textContent=e}},{key:"modalEvents",value:function(){var e=this,t=document.querySelector(".menu__button_add"),n=document.querySelector(".modal__close"),a=document.querySelector(".modal");t.addEventListener("click",function(){if(a.classList.contains("modal_open"))return!1;e.activedElement=document.activeElement,a.classList.add("modal_open"),a.focus()}),n.addEventListener("click",function(){a.classList.remove("modal_open"),e.activedElement.focus()}),document.addEventListener("keydown",function(t){27===t.keyCode&&a.classList.contains("modal_open")&&(a.classList.remove("modal_open"),e.activedElement.focus())})}},{key:"cityNameIsValid",value:function(e){var t={name:/^([a-zA-Z\u0080-\u024F]+(?:. |-| |'))*[a-zA-Z\u0080-\u024F]*$/,length:/^.{1,}/};for(var n in t)if(t.hasOwnProperty(n)&&!t[n].test(e))return!1;return!0}},{key:"countryCodeIsValid",value:function(e){return!!/^[a-z]{0,2}$/i.test(e)}},{key:"addWeatherEvent",value:function(){var e=this,t=document.querySelector(".modal__form");t.addEventListener("submit",function(n){var a=document.querySelector(".form__input_city"),r=e.cityNameIsValid(a.value);if(r){var i=document.querySelector(".form__input_code").value,o=Date.now(),u=""!==i&&e.countryCodeIsValid(i)?a.value+","+i:a.value,s=new l.default({id:o,name:u});new c.default(s),t.parentNode.classList.remove("modal_open"),e.activedElement.focus();var d=e.storage.load();d.push(s),e.storage.save(d),e.updateStatus("Added weather from "+u)}else a.focus(),e.updateStatus("Invalid city name or the field is empty");a.setAttribute("aria-invalid",!r),n.preventDefault()})}},{key:"refreshButtonEvent",value:function(){var e=this,t=document.querySelector(".menu__button_refresh"),n=document.querySelector(".main");t.addEventListener("click",function(){n.innerHTML="",e.init()})}},{key:"removeWeatherEvent",value:function(){var e=this,t=document.querySelector(".main");t.addEventListener("click",function(n){var a=n.target,r=null;if(a.classList.contains("weather__remove"))r=a.parentNode;else{if(!a.classList.contains("remove__img"))return!1;r=a.parentNode.parentNode}var i=e.storage.load(),o=Number(r.dataset.id),u=i.filter(function(e){return e.id!==o}),s=i.filter(function(e){return e.id===o});r.remove(),e.storage.save(u),e.updateStatus("Removed weather from "+s[0].name);var l=t.querySelector(".weather");l&&l.focus()},!1)}}]),e}();t.default=f,e.exports=t.default},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_app";a(this,e),this.storage=t}return r(e,[{key:"save",value:function(e){localStorage.setItem(this.storage,JSON.stringify(e))}},{key:"load",value:function(){return JSON.parse(localStorage.getItem(this.storage))||[]}}]),e}();t.default=i,e.exports=t.default},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.id=t.id,this.name=t.name};t.default=r,e.exports=t.default},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(4),o=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.urlApi="http://api.openweathermap.org/data/2.5/weather",this.keyApi="44474d9d409dc4313c91127230d0a569",this.id=t.id,this.getWeather(t.name)}return r(e,[{key:"getWeather",value:function(e){var t=this,n=encodeURIComponent(e);if(!window.fetch)throw Error("Sorry, your browser does not support Fetch API.");fetch(this.urlApi+"?q="+n+"&appid="+this.keyApi).then(function(e){if(!e.ok)throw Error("Ups, we have not connection :(");var t=e.headers.get("content-type");if(null===t&&-1===t.indexOf("application/json"))throw Error("We want JSON data!");return e.json()}).then(function(e){if(200!==e.cod)throw Error("Something is wrong :/ Try later.");new o.default(e,t.id)}).catch(function(e){throw Error(e.message)})}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(5),u=a(o),s=n(6),l=a(s),d=n(7),c=a(d),f=function(){function e(t,n){r(this,e),this.id=n,this.addWeatherToBody(t)}return i(e,[{key:"weatherTemplate",value:function(e){var t=document.createElement("article");return t.classList.add("weather"),t.tabIndex=0,t.dataset.id=this.id,t.innerHTML='<button class="weather__remove"><img src="img/close.svg" alt="Remove"></button><h2 class="weather__location">'+e.name+", "+e.sys.country+'</h2><div class="weather__date"><time datetime="'+(0,u.default)()+'">'+(0,u.default)("short")+'</time></div><div class="weather__description">'+e.weather[0].main+'</div><div class="weather__row"><div class="weather__information information"><img src="img/weather/'+e.weather[0].icon+'.svg" alt="" width="100"><div class="information__temperature temperature"><span class="temperature__value">'+(0,l.default)(e.main.temp)+'</span><span class="temperature__deg">&deg;C<span class="visuallyhidden">elsius</span></span></div></div><dl class="weather__details details"><div class="details__row"><dt class="details__label">Humidity</dt><dd class="details__value">'+e.main.humidity+'%</dd></div><div class="details__row"><dt class="details__label">Wind</dt><dd class="details__value">'+(0,c.default)(e.wind.speed)+' km/h</dd></div><div class="details__row"><dt class="details__label"><abbr title="Maximum">Max.</abbr> temperature</dt><dd class="details__value">'+(0,l.default)(e.main.temp_max)+'&deg;C<span class="visuallyhidden">elsius</span></dd></div><div class="details__row"><dt class="details__label"><abbr title="Minimum">Min.</abbr> temperature</dt><dd class="details__value">'+(0,l.default)(e.main.temp_min)+'&deg;C<span class="visuallyhidden">elsius</span></dd></div></dl></div>',t}},{key:"addWeatherToBody",value:function(e){document.querySelector(".main").appendChild(this.weatherTemplate(e))}}]),e}();t.default=f,e.exports=t.default},function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"long",t=new Date;return"short"!==e?String(t):new Intl.DateTimeFormat("en",{hour:"numeric",minute:"numeric",weekday:"long",month:"long",year:"numeric",hour12:!0}).format(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a,e.exports=t.default},function(e,t,n){"use strict";function a(e){return Math.round(e-273.15)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a,e.exports=t.default},function(e,t,n){"use strict";function a(e){return Math.round(3.6*e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a,e.exports=t.default}])});